---
import BaseLayout from "../layouts/BaseLayout.astro";

// SEO específico de Home (recomendado: keyword + Córdoba)
const title = "Alzo Logistica";
const description =
  "Distribuidor mayorista en Córdoba. Abastecemos kioscos, autoservicios y supermercados con marcas líderes. Pedidos ágiles y atención por WhatsApp.";

// Canonical robusto (si tenés site configurado en astro.config, mejor usar Astro.site)
const canonical = "https://alzologistica.com/";

---

<BaseLayout {title} {description} {canonical}>

  <header class="top-nav">
    <h1 class="site-title">Alzo</h1>
    <div class="top-nav-inner">

      <nav class="top-nav-links">
        <a href="#inicio">Alzo</a>
        <a href="#clientes">Clientes</a>
        <a href="#conecta">Conecta</a>
        <a href="#contacto">Contacto</a>
      </nav>
    </div>
  </header>

  <section  id="inicio" class="hero hero-content" data-scroll-center>
    <div class="hero-header">
      <div class="hero-logo">
        <img src="logos/alzo_logo.png" alt="Alzo" class="hero-logo-img" />
      </div>
      <div class="hero-subtitle">DISTRIBUIDOR OFICIAL</div>
    </div>

    {/* Carrusel de marcas */}
<div class="brand-carousel">
  <div class="brand-track" aria-label="Marcas">
    <div class="brand-set">
      <img src="logos/lucky_logo.png" alt="Lucky Strike" />
      <img src="logos/camel_logo.png" alt="Camel" />
      <img src="logos/nosotras_logo.png" alt="Nosotras" />
      <img src="logos/rinde2_logo.png" alt="Rinde 2" />
      <img src="logos/alka_logo.png" alt="Alka" />
      <img src="logos/bic_logo.png" alt="Bic" />
      <img src="logos/calipso_logo.png" alt="Calipso" />
      <img src="logos/lia_logo.png" alt="Lía" />
      <img src="logos/misky_logo.png" alt="Misky" />
      <img src="logos/noel_logo.png" alt="Noel" />
    </div>
  </div>
</div>


    <div class="hero-header">
      <p class="hero-text">
        ¡Estos son algunos de nuestros socios estrategicos!
      </p>
    </div>

  </section>

{/* Sección clientes con métricas */}
  <section id="clientes" class="clients-section">
    <div class="clients-grid">
      

      {/* Soy cliente */}
      <article class="client-card card client-card--top client-card--highlight"  data-scroll-target="clientes">
        
        <h3>Soy cliente</h3>
        
        <p>Información útil para clientes actuales</p>
        <img
          src="img/soycliente.png"
          alt="Soy cliente Alzo"
          class="client-card-img"
        />
        <a href="./soy-cliente" class="btn btn-primary">
          Información para clientes
        </a>
      </article>

      {/* + 4.000 clientes */}
      <div class="clients-stat clients-stat--clientes">
        <span
          class="clients-stat-number"
          data-target="4000"
        >
          +4.000
        </span>
        <span class="clients-stat-label">Clientes</span>
      </div>

      {/* Quiero ser cliente */}
      <article class="client-card card client-card--bottom client-card--highlight">
        <h3>Quiero ser cliente</h3>
        <p>Sumá tu kiosco, autoservicio o comercio.</p>
        <img
          src="img/quierosercliente.png"
          alt="Soy cliente Alzo"
          class="client-card-img"
        />
        <a href="#contacto" class="btn btn-primary">
          Contactanos
        </a>
      </article>

      {/* + 1.000.000 pedidos entregados */}
      <div class="clients-stat clients-stat--pedidos">
        <span
          class="clients-stat-number"
          data-target="2000000"
        >
          +2.000.000
        </span>
        <span class="clients-stat-label">Pedidos entregados</span>
      </div>
    </div>
  </section>

  {/* Bloque conectaMarket */}
{/* Bloque conectaMarket */}
<section id="conecta" class="conecta-section conecta-block">
  <div class="conecta-inner">
    <div class="conecta-layout">
      {/* Lado izquierdo: logo grande */}
      <div class="conecta-logo-box">
        <img
          src="img/conecta.png"
          alt="Conecta Market"
          class="conecta-logo-img"
        />
      </div>

      {/* Lado derecho: tarjeta blanca con texto + botón */}
      <article class="conecta-card">
        <h2>Hacé tu pedido fácil y rápido</h2>
        <p>Plataforma online exclusiva para nuestros clientes.</p>

        <a
          href="https://conectamarket.com.ar"
          target="_blank"
          rel="noreferrer"
          class="btn btn-primary conecta-btn"
        >
          Ir a Conecta
        </a>
      </article>
    </div>
  </div>
</section>
  {/* Contacto / WhatsApp */}
  <section id="contacto" class="contact-section contact-section-anim">
    <h2 data-scroll-target="contacto">Contactanos</h2>

    <div class="contact-cards">

      <article class="contact-card contact-card-anim">
        <div class="whatsapp-icon">
          <img src="img/whatsapp.png" alt="WhatsApp" />
        </div>
        <span>ADMINISTRACIÓN</span>
        <small>Facturación y cobranzas</small>
         <a
        href="https://wa.me/5493512029862"
        rel="noreferrer"
        class="btn-whatsapp"
      >
        Escribir por WhatsApp
      </a>
      </article>

      <article class="contact-card contact-card-anim">
        <div class="whatsapp-icon">
          <img src="img/whatsapp.png" alt="WhatsApp" />
        </div>
        <span>CANAL DIGITAL</span>
        <small>Pedidos y consultas online</small>
        <a
        href="https://wa.me/5493513276516"
        target="_blank"
        rel="noreferrer"
        class="btn-whatsapp"
      >
        Escribir por WhatsApp
      </a>
      </article>

      <article class="contact-card contact-card-anim">
        <div class="whatsapp-icon">
          <img src="img/whatsapp.png" alt="WhatsApp" />
        </div>
        <span>CANAL MAYORISTA</span>
        <small>Grandes cuentas y empresas</small>
        <a
        href="https://wa.me/5493516316968"
        target="_blank"
        rel="noreferrer"
        class="btn-whatsapp"
      >
        Escribir por WhatsApp
      </a>
      </article>
    </div>
  </section>

<script>
  function navHeight() {
    const nav = document.querySelector(".top-nav");
    return nav ? nav.getBoundingClientRect().height : 0;
  }

  // Offsets por breakpoint
  // Ajustá los valores mobile/tablet a gusto.
  const OFFSETS = {
    desktop: {  // >= 1024
      "#inicio": 0,
      "#clientes": 110,
      "#conecta": 40,
      "#contacto": 20,
    },
    tablet: {   // 768 - 1023
      "#inicio": 0,
    "#clientes": 150,
    "#conecta": 40,
    "#contacto": 20,
    },
    mobile: {   // < 768
      "#inicio": 0,
    "#clientes": 150,
    "#conecta": 40,
    "#contacto": 20,
    },
  };

  function currentOffsets() {
    const w = window.innerWidth;
    if (w >= 1024) return OFFSETS.desktop;
    if (w >= 768) return OFFSETS.tablet;
    return OFFSETS.mobile;
  }

  function scrollToNice(hash) {
    const section = document.querySelector(hash);
    if (!section) return;

    const key = hash.replace("#", "");
    const target =
      section.querySelector(`[data-scroll-target="${key}"]`) || section;

    const rect = target.getBoundingClientRect();
    const baseTop = rect.top + window.scrollY;

    const extra = (currentOffsets()[hash] ?? 0);

    const top = baseTop - navHeight() - extra;

    window.scrollTo({ top, behavior: "smooth" });
  }

  document.addEventListener("click", (e) => {
    const a = e.target.closest('a[href^="#"]');
    if (!a) return;

    const hash = a.getAttribute("href");
    if (!hash || hash === "#") return;

    if (!document.querySelector(hash)) return;

    e.preventDefault();
    history.pushState(null, "", hash);
    scrollToNice(hash);
  });

  window.addEventListener("load", () => {
    if (location.hash && document.querySelector(location.hash)) {
      scrollToNice(location.hash);
    }
  });

  // Si el usuario rota el teléfono o cambia tamaño, re-aplica el offset al hash actual
  window.addEventListener("resize", () => {
    clearTimeout(window.__navResizeT);
    window.__navResizeT = setTimeout(() => {
      if (location.hash && document.querySelector(location.hash)) {
        scrollToNice(location.hash);
      }
    }, 150);
  });
</script>



  <!-- Script GSAP -->
<script>
  import gsap from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  window.addEventListener("load", () => {
    // =========================
    // HERO (primer pantalla)
    // =========================
    gsap.from(".hero-content", {
      opacity: 0,
      y: -80,
      scale: 0.95,
      duration: 1.4,
      ease: "power4.out",
    });

    // Logos de marcas (carrusel)
    gsap.from(".brand-track img", {
      opacity: 0,
      y: 60,
      duration: 1,
      stagger: 0.08,
      delay: 0.4,
      ease: "power3.out",
    });

    // =========================
    // SECCIÓN CLIENTES
    // =========================

    // Cards (Soy cliente / Quiero ser cliente) – fuerte al entrar y salir
    gsap.fromTo(
      ".client-card",
      { autoAlpha: 0, y: 90, scale: 0.9 },
      {
        autoAlpha: 1,
        y: 0,
        scale: 1,
        duration: 1,
        stagger: 0.25,
        ease: "power4.out",
        scrollTrigger: {
          trigger: ".clients-section",
          start: "top 70%",
          end: "bottom 40%",
          toggleActions: "play reverse play reverse", // entra y sale
        },
      }
    );

    // Stats (+4.000 / +1.000.000) – entrada lateral + fade
    gsap.fromTo(
      ".clients-stat",
      { autoAlpha: 0, y: 60, x: -40 },
      {
        autoAlpha: 1,
        y: 0,
        x: 0,
        duration: 1,
        stagger: 0.2,
        ease: "power3.out",
        scrollTrigger: {
          trigger: ".clients-section",
          start: "top 70%",
          end: "bottom 40%",
          toggleActions: "play reverse play reverse",
        },
      }
    );

    // Conteo de números (+4.000, +1.000.000) cada vez que entran
    const formatNumber = (value) =>
      value.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");

    gsap.utils.toArray(".clients-stat-number").forEach((el) => {
      const target = Number(el.dataset.target) || 0;

      ScrollTrigger.create({
        trigger: el,
        start: "top 80%",
        onEnter() {
          const obj = { value: 0 };
          gsap.to(obj, {
            value: target,
            duration: 1.6,
            ease: "power3.out",
            onUpdate() {
              const current = Math.floor(obj.value);
              el.textContent = `+ ${formatNumber(current)}`;
            },
          });
        },
        onLeaveBack() {
          // al volver hacia arriba, reseteamos para que vuelva a contar
          el.textContent = "+ 0";
        },
      });
    });

    // =========================
    // CONECTA
    // =========================
    gsap.fromTo(
      ".conecta-block",
      { autoAlpha: 0, y: 80, scale: 0.9 },
      {
        autoAlpha: 1,
        y: 0,
        scale: 1,
        duration: 1,
        ease: "power3.out",
        scrollTrigger: {
          trigger: ".conecta-block",
          start: "top 80%",
          end: "bottom 40%",
          toggleActions: "play reverse play reverse",
        },
      }
    );

    // =========================
    // CONTACTO
    // =========================
    gsap.fromTo(
      ".contact-card-anim",
      { autoAlpha: 0, y: 80, scale: 0.9 },
      {
        autoAlpha: 1,
        y: 0,
        scale: 1,
        duration: 0.9,
        stagger: 0.2,
        ease: "power3.out",
        scrollTrigger: {
          trigger: ".contact-section-anim",
          start: "top 80%",
          end: "bottom 40%",
          toggleActions: "play reverse play reverse",
        },
      }
    );
  });
</script>
<script>
  function setupMarquee() {
    const carousel = document.querySelector(".brand-carousel");
    const track = document.querySelector(".brand-track");
    const firstSet = document.querySelector(".brand-set");
    if (!carousel || !track || !firstSet) return;

    [...track.querySelectorAll(".brand-set")].slice(1).forEach(n => n.remove());


    const imgs = firstSet.querySelectorAll("img");
    const waitImgs = [...imgs].map(img =>
      img.complete ? Promise.resolve() : new Promise(res => {
        img.addEventListener("load", res, { once: true });
        img.addEventListener("error", res, { once: true });
      })
    );

    Promise.all(waitImgs).then(() => {
      const setWidth = firstSet.getBoundingClientRect().width;
      const needed = Math.ceil((carousel.clientWidth * 2) / setWidth) + 1;

      for (let i = 0; i < needed; i++) {
        const clone = firstSet.cloneNode(true);
        clone.setAttribute("aria-hidden", "true");
        track.appendChild(clone);
      }
      track.style.setProperty("--scroll", `${setWidth}px`);

      const pxPerSecond = 90;
      track.style.setProperty("--dur", `${setWidth / pxPerSecond}s`);
    });
  }

  window.addEventListener("load", setupMarquee);
  window.addEventListener("resize", () => {
    clearTimeout(window.__marq);
    window.__marq = setTimeout(setupMarquee, 150);
  });
</script>
</BaseLayout>
